# go-judge æ¥å£è¯¦ç»†ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

go-judge æ˜¯ä¸€ä¸ªæ²™ç®±æœåŠ¡ï¼Œé€šè¿‡ REST API æä¾›ä»£ç æ‰§è¡ŒåŠŸèƒ½ã€‚æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜æ¥å£å‚æ•°ã€è¿”å›å€¼å«ä¹‰ä»¥åŠå®Œæ•´çš„ä½¿ç”¨æµç¨‹ã€‚

## ğŸ”— æ ¸å¿ƒæ¥å£

### 1. ä»£ç æ‰§è¡Œæ¥å£

**æ¥å£åœ°å€**: `POST /run`
**åŠŸèƒ½**: æ‰§è¡Œç”¨æˆ·ä»£ç ï¼ˆç¼–è¯‘ã€è¿è¡Œï¼‰
**Content-Type**: `application/json`

### 2. æ–‡ä»¶ç®¡ç†æ¥å£

- `GET /file` - åˆ—å‡ºæ‰€æœ‰ç¼“å­˜æ–‡ä»¶
- `POST /file` - ä¸Šä¼ æ–‡ä»¶åˆ°ç¼“å­˜
- `GET /file/{fileId}` - ä¸‹è½½æŒ‡å®šæ–‡ä»¶
- `DELETE /file/{fileId}` - åˆ é™¤æŒ‡å®šæ–‡ä»¶

### 3. ç³»ç»Ÿä¿¡æ¯æ¥å£

- `GET /version` - è·å–ç‰ˆæœ¬ä¿¡æ¯
- `GET /config` - è·å–ç³»ç»Ÿé…ç½®

## ğŸ“ è¯·æ±‚å‚æ•°è¯¦è§£

### ä¸»è¯·æ±‚ç»“æ„

```json
{
  "cmd": [
    {
      "args": ["å‘½ä»¤", "å‚æ•°1", "å‚æ•°2"],
      "env": ["ç¯å¢ƒå˜é‡1", "ç¯å¢ƒå˜é‡2"],
      "files": [æ–‡ä»¶æè¿°ç¬¦æ•°ç»„],
      "cpuLimit": CPUæ—¶é—´é™åˆ¶(çº³ç§’),
      "clockLimit": å¢™é’Ÿæ—¶é—´é™åˆ¶(çº³ç§’),
      "memoryLimit": å†…å­˜é™åˆ¶(å­—èŠ‚),
      "stackLimit": æ ˆé™åˆ¶(å­—èŠ‚),
      "procLimit": è¿›ç¨‹æ•°é™åˆ¶,
      "cpuRate": CPUä½¿ç”¨ç‡é™åˆ¶,
      "strictMemoryLimit": ä¸¥æ ¼å†…å­˜é™åˆ¶,
      "copyIn": {è¾“å…¥æ–‡ä»¶æ˜ å°„},
      "copyOut": [è¾“å‡ºæ–‡ä»¶åˆ—è¡¨],
      "copyOutCached": [ç¼“å­˜è¾“å‡ºæ–‡ä»¶åˆ—è¡¨],
      "copyOutMax": è¾“å‡ºæ–‡ä»¶å¤§å°é™åˆ¶
    }
  ],
  "pipeMapping": [ç®¡é“æ˜ å°„é…ç½®]
}
```

### å‚æ•°è¯¦ç»†è¯´æ˜

#### cmd æ•°ç»„
- **ç±»å‹**: `Array`
- **å¿…éœ€**: âœ…
- **ä½œç”¨**: å®šä¹‰è¦æ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ï¼Œæ”¯æŒå¤šä¸ªå‘½ä»¤ä¸²è”æ‰§è¡Œ

#### args å‚æ•°
- **ç±»å‹**: `Array<String>`
- **å¿…éœ€**: âœ…
- **ä½œç”¨**: å®šä¹‰æ‰§è¡Œçš„å‘½ä»¤å’Œå‚æ•°
- **ç¤ºä¾‹**: 
  ```json
  // Java ç¼–è¯‘
  ["args": ["/usr/bin/javac", "Main.java"]]
  
  // Java è¿è¡Œ
  ["args": ["/usr/bin/java", "Main"]]
  
  // C++ ç¼–è¯‘
  ["args": ["/usr/bin/g++", "main.cpp", "-o", "main"]]
  ```

#### env å‚å¢ƒå˜é‡
- **ç±»å‹**: `Array<String>`
- **å¿…éœ€**: âŒ
- **ä½œç”¨**: è®¾ç½®ç¨‹åºæ‰§è¡Œæ—¶çš„ç¯å¢ƒå˜é‡
- **æ ¼å¼**: `"å˜é‡å=å˜é‡å€¼"`
- **ç¤ºä¾‹**:
  ```json
  "env": [
    "PATH=/usr/bin:/bin",
    "JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64",
    "CLASSPATH=.",
    "LANG=C.UTF-8"
  ]
  ```

#### files æ–‡ä»¶æè¿°ç¬¦
- **ç±»å‹**: `Array<Object>`
- **å¿…éœ€**: âœ…
- **ä½œç”¨**: å®šä¹‰æ ‡å‡†è¾“å…¥/è¾“å‡º/é”™è¯¯çš„å¤„ç†æ–¹å¼
- **ç»“æ„**:
  ```json
  [
    {"content": "è¾“å…¥å†…å®¹"},           // stdin - æ ‡å‡†è¾“å…¥
    {"name": "stdout", "max": 10240}, // stdout - æ ‡å‡†è¾“å‡º
    {"name": "stderr", "max": 10240}  // stderr - æ ‡å‡†é”™è¯¯
  ]
  ```

#### èµ„æºé™åˆ¶å‚æ•°

| å‚æ•° | ç±»å‹ | å•ä½ | é»˜è®¤å€¼ | ä½œç”¨ |
|------|------|------|--------|------|
| `cpuLimit` | `int64` | çº³ç§’ | 1s | CPU æ—¶é—´é™åˆ¶ |
| `clockLimit` | `int64` | çº³ç§’ | cpuLimitÃ—3 | å¢™é’Ÿæ—¶é—´é™åˆ¶ |
| `memoryLimit` | `int64` | å­—èŠ‚ | 128MB | å†…å­˜ä½¿ç”¨é™åˆ¶ |
| `stackLimit` | `int64` | å­—èŠ‚ | memoryLimit | æ ˆç©ºé—´é™åˆ¶ |
| `procLimit` | `int` | ä¸ªæ•° | 1 | æœ€å¤§è¿›ç¨‹æ•° |
| `cpuRate` | `float64` | 0-1 | 0 | CPU ä½¿ç”¨ç‡é™åˆ¶ |

**æ—¶é—´æ¢ç®—**:
- 1ç§’ = 1,000,000,000çº³ç§’
- ç¼–è¯‘å»ºè®®: 10-30ç§’
- è¿è¡Œå»ºè®®: 1-5ç§’

**å†…å­˜æ¢ç®—**:
- 1MB = 1,048,576å­—èŠ‚
- ç¼–è¯‘å»ºè®®: 256-512MB
- è¿è¡Œå»ºè®®: 64-256MB

#### copyIn è¾“å…¥æ–‡ä»¶
- **ç±»å‹**: `Object`
- **å¿…éœ€**: âŒ
- **ä½œç”¨**: å‘æ²™ç®±ä¼ å…¥æ–‡ä»¶
- **æ ¼å¼**:
  ```json
  "copyIn": {
    "æ–‡ä»¶å": {
      "content": "æ–‡ä»¶å†…å®¹"    // ç›´æ¥å†…å®¹
    },
    "æ–‡ä»¶å": {
      "fileId": "ç¼“å­˜æ–‡ä»¶ID"   // å¼•ç”¨ç¼“å­˜æ–‡ä»¶
    }
  }
  ```

#### copyOut è¾“å‡ºæ–‡ä»¶
- **ç±»å‹**: `Array<String>`
- **å¿…éœ€**: âŒ
- **ä½œç”¨**: ä»æ²™ç®±è·å–æ–‡ä»¶å†…å®¹
- **ç¤ºä¾‹**: `["stdout", "stderr", "output.txt"]`

#### copyOutCached ç¼“å­˜è¾“å‡º
- **ç±»å‹**: `Array<String>`
- **å¿…éœ€**: âŒ
- **ä½œç”¨**: ç¼“å­˜è¾“å‡ºæ–‡ä»¶ä¾›åç»­ä½¿ç”¨ï¼ˆå¦‚ç¼–è¯‘ç”Ÿæˆçš„classæ–‡ä»¶ï¼‰
- **ç¤ºä¾‹**: `["Main.class", "program.exe"]`

## ğŸ“¤ è¿”å›å€¼è¯¦è§£

### å“åº”ç»“æ„

```json
[
  {
    "status": "æ‰§è¡ŒçŠ¶æ€",
    "exitStatus": é€€å‡ºç ,
    "time": CPUæ—¶é—´(çº³ç§’),
    "memory": å†…å­˜ä½¿ç”¨(å­—èŠ‚),
    "runTime": è¿è¡Œæ—¶é—´(çº³ç§’),
    "procPeak": å³°å€¼è¿›ç¨‹æ•°,
    "files": {
      "æ–‡ä»¶å": "æ–‡ä»¶å†…å®¹"
    },
    "fileIds": {
      "æ–‡ä»¶å": "ç¼“å­˜æ–‡ä»¶ID"
    },
    "fileError": [
      {
        "name": "æ–‡ä»¶å",
        "type": "é”™è¯¯ç±»å‹",
        "message": "é”™è¯¯ä¿¡æ¯"
      }
    ]
  }
]
```

### çŠ¶æ€ç è¯¦è§£

| çŠ¶æ€ | å«ä¹‰ | è¯´æ˜ | å¤„ç†å»ºè®® |
|------|------|------|----------|
| `Accepted` | æ­£å¸¸å®Œæˆ | ç¨‹åºæˆåŠŸæ‰§è¡Œå®Œæ¯• | ç»§ç»­ä¸‹ä¸€æ­¥å¤„ç† |
| `Memory Limit Exceeded` | å†…å­˜è¶…é™ | ç¨‹åºä½¿ç”¨å†…å­˜è¶…è¿‡é™åˆ¶ | æç¤ºç”¨æˆ·ä¼˜åŒ–å†…å­˜ä½¿ç”¨ |
| `Time Limit Exceeded` | æ—¶é—´è¶…é™ | ç¨‹åºæ‰§è¡Œæ—¶é—´è¶…è¿‡é™åˆ¶ | æç¤ºç”¨æˆ·ä¼˜åŒ–ç®—æ³•æ•ˆç‡ |
| `Output Limit Exceeded` | è¾“å‡ºè¶…é™ | ç¨‹åºè¾“å‡ºè¶…è¿‡å¤§å°é™åˆ¶ | æ£€æŸ¥è¾“å‡ºå†…å®¹å’Œæ ¼å¼ |
| `File Error` | æ–‡ä»¶é”™è¯¯ | æ–‡ä»¶æ“ä½œå¤±è´¥ | æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œæƒé™ |
| `Nonzero Exit Status` | éé›¶é€€å‡º | ç¨‹åºå¼‚å¸¸é€€å‡º | æ£€æŸ¥ç¼–è¯‘é”™è¯¯æˆ–è¿è¡Œæ—¶é”™è¯¯ |
| `Signalled` | ä¿¡å·ç»ˆæ­¢ | ç¨‹åºè¢«ä¿¡å·ç»ˆæ­¢ | æ£€æŸ¥æ®µé”™è¯¯ç­‰è¿è¡Œæ—¶é—®é¢˜ |
| `Dangerous Syscall` | å±é™©ç³»ç»Ÿè°ƒç”¨ | ç¨‹åºå°è¯•å±é™©æ“ä½œ | å®‰å…¨æ£€æŸ¥ï¼Œæ‹’ç»æ‰§è¡Œ |
| `Internal Error` | å†…éƒ¨é”™è¯¯ | æ²™ç®±å†…éƒ¨é”™è¯¯ | è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ |

### è¿”å›å­—æ®µè¯´æ˜

#### status æ‰§è¡ŒçŠ¶æ€
- **ç±»å‹**: `String`
- **ä½œç”¨**: è¡¨ç¤ºç¨‹åºæ‰§è¡Œçš„æœ€ç»ˆçŠ¶æ€
- **å€¼**: è§ä¸Šè¡¨çŠ¶æ€ç 

#### exitStatus é€€å‡ºç 
- **ç±»å‹**: `int`
- **ä½œç”¨**: ç¨‹åºçš„é€€å‡ºçŠ¶æ€ç 
- **å€¼**:
  - `0`: æ­£å¸¸é€€å‡º
  - `1`: ä¸€èˆ¬é”™è¯¯ï¼ˆå¦‚ç¼–è¯‘é”™è¯¯ï¼‰
  - `9`: è¢«SIGKILLç»ˆæ­¢ï¼ˆé€šå¸¸æ˜¯è¶…æ—¶ï¼‰
  - `11`: æ®µé”™è¯¯ï¼ˆSIGSEGVï¼‰

#### time CPUæ—¶é—´
- **ç±»å‹**: `int64`
- **å•ä½**: çº³ç§’
- **ä½œç”¨**: ç¨‹åºå®é™…ä½¿ç”¨çš„CPUæ—¶é—´
- **æ¢ç®—**: `time / 1,000,000` = æ¯«ç§’

#### memory å†…å­˜ä½¿ç”¨
- **ç±»å‹**: `int64`
- **å•ä½**: å­—èŠ‚
- **ä½œç”¨**: ç¨‹åºçš„æœ€å¤§å†…å­˜ä½¿ç”¨é‡
- **æ¢ç®—**: `memory / 1024` = KB

#### runTime è¿è¡Œæ—¶é—´
- **ç±»å‹**: `int64`
- **å•ä½**: çº³ç§’
- **ä½œç”¨**: ç¨‹åºçš„å¢™é’Ÿæ—¶é—´ï¼ˆå®é™…ç»è¿‡æ—¶é—´ï¼‰

#### files è¾“å‡ºæ–‡ä»¶
- **ç±»å‹**: `Object`
- **ä½œç”¨**: åŒ…å«ç¨‹åºçš„è¾“å‡ºæ–‡ä»¶å†…å®¹
- **å¸¸è§é”®**:
  - `stdout`: æ ‡å‡†è¾“å‡º
  - `stderr`: æ ‡å‡†é”™è¯¯è¾“å‡º

#### fileIds ç¼“å­˜æ–‡ä»¶ID
- **ç±»å‹**: `Object`
- **ä½œç”¨**: ç¼“å­˜æ–‡ä»¶çš„IDæ˜ å°„ï¼Œç”¨äºåç»­å¼•ç”¨
- **ç¤ºä¾‹**: `{"Main.class": "ABC123DEF"}`

#### fileError æ–‡ä»¶é”™è¯¯
- **ç±»å‹**: `Array`
- **ä½œç”¨**: æ–‡ä»¶æ“ä½œç›¸å…³çš„é”™è¯¯ä¿¡æ¯
- **å­—æ®µ**:
  - `name`: æ–‡ä»¶å
  - `type`: é”™è¯¯ç±»å‹ï¼ˆå¦‚ CopyOutOpenï¼‰
  - `message`: è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ”„ å®Œæ•´ä½¿ç”¨æµç¨‹

### Java ä»£ç æ‰§è¡Œæµç¨‹

#### æ­¥éª¤1: ç¼–è¯‘Javaä»£ç 

```json
{
  "cmd": [{
    "args": ["/usr/bin/javac", "Main.java"],
    "env": [
      "PATH=/usr/bin:/bin",
      "JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64"
    ],
    "files": [
      {"content": ""},
      {"name": "stdout", "max": 10240},
      {"name": "stderr", "max": 10240}
    ],
    "cpuLimit": 10000000000,
    "memoryLimit": 268435456,
    "procLimit": 50,
    "copyIn": {
      "Main.java": {
        "content": "public class Main {\n    public static void main(String[] args) {\n        System.out.println(\"Hello World\");\n    }\n}"
      }
    },
    "copyOut": ["stdout", "stderr"],
    "copyOutCached": ["Main.class"]
  }]
}
```

**ç¼–è¯‘å“åº”ç¤ºä¾‹**:
```json
[{
  "status": "Accepted",
  "exitStatus": 0,
  "time": 870867000,
  "memory": 59801600,
  "runTime": 360798111,
  "files": {
    "stderr": "",
    "stdout": ""
  },
  "fileIds": {
    "Main.class": "ABC123DEF456"
  }
}]
```

#### æ­¥éª¤2: è¿è¡ŒJavaç¨‹åº

```json
{
  "cmd": [{
    "args": ["/usr/bin/java", "Main"],
    "env": [
      "PATH=/usr/bin:/bin",
      "JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64"
    ],
    "files": [
      {"content": ""},
      {"name": "stdout", "max": 10240},
      {"name": "stderr", "max": 10240}
    ],
    "cpuLimit": 5000000000,
    "memoryLimit": 134217728,
    "procLimit": 1,
    "copyIn": {
      "Main.class": {
        "fileId": "ABC123DEF456"
      }
    },
    "copyOut": ["stdout", "stderr"]
  }]
}
```

**è¿è¡Œå“åº”ç¤ºä¾‹**:
```json
[{
  "status": "Accepted",
  "exitStatus": 0,
  "time": 123456789,
  "memory": 45678912,
  "runTime": 234567890,
  "files": {
    "stderr": "",
    "stdout": "Hello World\n"
  },
  "fileIds": {}
}]
```

#### æ­¥éª¤3: æ¸…ç†ç¼“å­˜æ–‡ä»¶

```http
DELETE /file/ABC123DEF456
```

**å“åº”**: `200 OK`

## ğŸ› ï¸ ä½¿ç”¨æ¨¡å¼

### æ¨¡å¼1: ç¼–è¯‘+è¿è¡Œåˆ†ç¦»

```mermaid
sequenceDiagram
    Client->>go-judge: POST /run (ç¼–è¯‘)
    go-judge-->>Client: è¿”å›classæ–‡ä»¶ID
    Client->>go-judge: POST /run (è¿è¡Œ, ä½¿ç”¨æ–‡ä»¶ID)
    go-judge-->>Client: è¿”å›æ‰§è¡Œç»“æœ
    Client->>go-judge: DELETE /file/{fileId}
    go-judge-->>Client: ç¡®è®¤åˆ é™¤
```

**ä¼˜åŠ¿**: 
- ç¼–è¯‘ä¸€æ¬¡ï¼Œå¤šæ¬¡è¿è¡Œ
- é€‚åˆå¤šä¸ªæµ‹è¯•ç”¨ä¾‹åœºæ™¯
- èŠ‚çœèµ„æº

### æ¨¡å¼2: ä¸€ä½“åŒ–æ‰§è¡Œ

```json
{
  "cmd": [
    {
      "args": ["/usr/bin/javac", "Main.java"],
      "copyIn": {"Main.java": {"content": "æºä»£ç "}},
      "copyOutCached": ["Main.class"]
    },
    {
      "args": ["/usr/bin/java", "Main"],
      "files": [{"content": "è¾“å…¥æ•°æ®"}, {"name": "stdout", "max": 10240}],
      "copyIn": {"Main.class": {"fileId": ""}},
      "copyOut": ["stdout"]
    }
  ],
  "pipeMapping": [
    {"in": {"index": 0, "fd": 1}, "out": {"index": 1, "fd": 0}}
  ]
}
```

**ä¼˜åŠ¿**:
- ä¸€æ¬¡è¯·æ±‚å®Œæˆ
- è‡ªåŠ¨æ–‡ä»¶ä¼ é€’
- ç®€åŒ–æµç¨‹

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ–‡ä»¶ç®¡ç†

- **åŠæ—¶æ¸…ç†**: ç¼“å­˜æ–‡ä»¶ä¼šå ç”¨å†…å­˜ï¼Œç”¨å®Œéœ€ç«‹å³åˆ é™¤
- **å¤§å°é™åˆ¶**: å•ä¸ªæ–‡ä»¶æœ‰å¤§å°é™åˆ¶ï¼Œé»˜è®¤64MB
- **ç”Ÿå‘½å‘¨æœŸ**: æ–‡ä»¶æœ‰TTLï¼Œè¿‡æœŸè‡ªåŠ¨åˆ é™¤

### 2. èµ„æºè®¾ç½®

- **ç¼–è¯‘èµ„æº**: é€šå¸¸éœ€è¦æ›´å¤šæ—¶é—´å’Œå†…å­˜
- **è¿è¡Œèµ„æº**: æ ¹æ®é¢˜ç›®è¦æ±‚ä¸¥æ ¼é™åˆ¶
- **è¿›ç¨‹é™åˆ¶**: ç¼–è¯‘æ—¶å¯ä»¥å¤šè¿›ç¨‹ï¼Œè¿è¡Œæ—¶å»ºè®®å•è¿›ç¨‹

### 3. é”™è¯¯å¤„ç†

```go
// Go è¯­è¨€é”™è¯¯å¤„ç†ç¤ºä¾‹
func handleJudgeResult(result JudgeResult) {
    switch result.Status {
    case "Accepted":
        // å¤„ç†æˆåŠŸ
    case "Memory Limit Exceeded":
        // å†…å­˜è¶…é™
    case "Time Limit Exceeded":
        // æ—¶é—´è¶…é™
    case "Compile Error":
        // ç¼–è¯‘é”™è¯¯
        fmt.Println("ç¼–è¯‘é”™è¯¯:", result.Files["stderr"])
    case "Runtime Error":
        // è¿è¡Œæ—¶é”™è¯¯
    default:
        // å…¶ä»–é”™è¯¯
    }
}
```

### 4. æ€§èƒ½ä¼˜åŒ–

- **è¿æ¥å¤ç”¨**: ä½¿ç”¨HTTPè¿æ¥æ± 
- **å¹¶å‘æ§åˆ¶**: é™åˆ¶åŒæ—¶è¯·æ±‚æ•°é‡
- **è¶…æ—¶è®¾ç½®**: è®¾ç½®åˆç†çš„è¯·æ±‚è¶…æ—¶
- **é‡è¯•æœºåˆ¶**: å¯¹ä¸´æ—¶å¤±è´¥è¿›è¡Œé‡è¯•

### 5. å®‰å…¨è€ƒè™‘

- **è¾“å…¥éªŒè¯**: éªŒè¯ç”¨æˆ·ä»£ç å®‰å…¨æ€§
- **èµ„æºé™åˆ¶**: ä¸¥æ ¼è®¾ç½®èµ„æºä¸Šé™
- **æ²™ç®±éš”ç¦»**: ä¾èµ–go-judgeçš„å®‰å…¨æœºåˆ¶
- **æ—¥å¿—ç›‘æ§**: è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¥å¿—

## ğŸ“š å®ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ACMç«èµ›é¢˜ç›®

```json
{
  "cmd": [{
    "args": ["/usr/bin/javac", "Main.java"],
    "env": ["PATH=/usr/bin:/bin", "JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64"],
    "files": [{"content": ""}, {"name": "stdout", "max": 10240}, {"name": "stderr", "max": 10240}],
    "cpuLimit": 30000000000,
    "memoryLimit": 536870912,
    "procLimit": 50,
    "copyIn": {
      "Main.java": {
        "content": "import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int a = sc.nextInt();\n        int b = sc.nextInt();\n        System.out.println(a + b);\n    }\n}"
      }
    },
    "copyOut": ["stdout", "stderr"],
    "copyOutCached": ["Main.class"]
  }]
}
```

### ç¤ºä¾‹2: æ‰¹é‡æµ‹è¯•ç”¨ä¾‹

```python
# Python å®¢æˆ·ç«¯ç¤ºä¾‹
import requests

def judge_solution(code, test_cases):
    # ç¼–è¯‘ä»£ç 
    compile_request = {
        "cmd": [{
            "args": ["/usr/bin/javac", "Main.java"],
            "env": ["PATH=/usr/bin:/bin", "JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64"],
            "files": [{"content": ""}, {"name": "stdout", "max": 10240}, {"name": "stderr", "max": 10240}],
            "cpuLimit": 10000000000,
            "memoryLimit": 268435456,
            "procLimit": 50,
            "copyIn": {"Main.java": {"content": code}},
            "copyOut": ["stdout", "stderr"],
            "copyOutCached": ["Main.class"]
        }]
    }
    
    compile_response = requests.post("http://localhost:5050/run", json=compile_request)
    compile_result = compile_response.json()[0]
    
    if compile_result["status"] != "Accepted":
        return {"status": "Compile Error", "error": compile_result["files"]["stderr"]}
    
    class_file_id = compile_result["fileIds"]["Main.class"]
    
    # è¿è¡Œæµ‹è¯•ç”¨ä¾‹
    results = []
    for i, test_case in enumerate(test_cases):
        run_request = {
            "cmd": [{
                "args": ["/usr/bin/java", "Main"],
                "env": ["PATH=/usr/bin:/bin", "JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64"],
                "files": [{"content": test_case["input"]}, {"name": "stdout", "max": 10240}, {"name": "stderr", "max": 10240}],
                "cpuLimit": 2000000000,
                "memoryLimit": 134217728,
                "procLimit": 1,
                "copyIn": {"Main.class": {"fileId": class_file_id}},
                "copyOut": ["stdout", "stderr"]
            }]
        }
        
        run_response = requests.post("http://localhost:5050/run", json=run_request)
        run_result = run_response.json()[0]
        
        results.append({
            "test_case": i + 1,
            "status": run_result["status"],
            "output": run_result["files"]["stdout"],
            "expected": test_case["output"],
            "time": run_result["time"] // 1000000,  # è½¬æ¢ä¸ºæ¯«ç§’
            "memory": run_result["memory"] // 1024   # è½¬æ¢ä¸ºKB
        })
    
    # æ¸…ç†ç¼“å­˜æ–‡ä»¶
    requests.delete(f"http://localhost:5050/file/{class_file_id}")
    
    return {"status": "Success", "results": results}
```

è¿™ä¸ªæ–‡æ¡£æ¶µç›–äº† go-judge æ¥å£çš„æ‰€æœ‰é‡è¦ä¿¡æ¯ï¼Œå¸®åŠ©æ‚¨ç†è§£å’Œæ­£ç¡®ä½¿ç”¨è¿™ä¸ªæ²™ç®±æœåŠ¡ã€‚